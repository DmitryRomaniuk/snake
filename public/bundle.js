!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./lib/index.js")}({"./lib/Food.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"generateFoodPosition",value:function(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e,r){e||t.push({x:r,y:n})})}),t.length>0?t[Math.floor(Math.random()*t.length)]:null}}]),e}();t.default=a},"./lib/Results.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.result=0}return i(e,null,[{key:"saveResult",value:function(e){localStorage.setItem("resultGame",e)}},{key:"getResult",value:function(){return localStorage.resultGame}}]),e}();t.default=a},"./lib/Snake.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.lenght=4,this.headPosition={x:Math.floor(t[0].length/2),y:Math.floor(t.length/2)},this.positionEachElement=function(e,t){return new Array(e).fill(0).map(function(e,n){return{x:t.x-n,y:t.y}})}(this.lenght,this.headPosition)}return i(e,[{key:"increaseLength",value:function(){this.length++}},{key:"snakeEatFood",value:function(e){return e.x===this.headPosition.x&&e.y===this.headPosition.y}},{key:"_updatePosSnake",value:function(e){this.positionEachElement.unshift({x:this.headPosition.x,y:this.headPosition.y}),this.snakeEatFood(e)||this.positionEachElement.pop()}},{key:"makeNextStep",value:function(e,t,n,r){return("left"!==t||0!==this.headPosition.x&&e[this.headPosition.y][this.headPosition.x-1]!==n)&&(("right"!==t||this.headPosition.x!==e[0].length-1&&e[this.headPosition.y][this.headPosition.x+1]!==n)&&(("up"!==t||0!==this.headPosition.y&&e[this.headPosition.y-1][this.headPosition.x]!==n)&&(("down"!==t||this.headPosition.y!==e.length-1&&e[this.headPosition.y+1][this.headPosition.x]!==n)&&("left"===t&&(this.headPosition.x--,this._updatePosSnake(r)),"right"===t&&(this.headPosition.x++,this._updatePosSnake(r)),"up"===t&&(this.headPosition.y--,this._updatePosSnake(r)),"down"===t&&(this.headPosition.y++,this._updatePosSnake(r)),this.positionEachElement))))}}]),e}();t.default=a},"./lib/index.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=v.querySelector(".wrapper-hello"),t=v.querySelector(".wrapper-game"),n=v.querySelector(".wrapper-result");e.setAttribute("style","display: none"),t.setAttribute("style","display: block"),n.setAttribute("style","display: none"),k.start()}function s(){var e=v.querySelector(".wrapper-game"),t=v.querySelector(".wrapper-result");e.setAttribute("style","display: none"),t.setAttribute("style","display: block")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n("./lib/Food.js"),c=r(l),h=n("./lib/Results.js"),d=r(h),f=n("./lib/Snake.js"),m=r(f),y=void 0,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;a(this,e),this.speed=r,this.snakeName="snake",this.foodName="food",this.zeroFieldName=0,this.gameArea=function(e){return new Array(n).fill(e).map(function(){return new Array(t).fill(e)})}(this.zeroFieldName),this.newGameAreaState=function(){var e=this;return new Array(n).fill(this.zeroFieldName).map(function(){return new Array(t).fill(e.zeroFieldName)})},this.foodPosition=c.default.generateFoodPosition(this.gameArea),this.userPressKey="right",this.direction="right",this.gamePaused=!1,this.snake=new m.default(this.newGameAreaState()),this.resultGame=new d.default}return u(e,[{key:"createHtmlMarkUpGamePlace",value:function(){var e=document.createElement("div");return e.setAttribute("class","game-child"),document.getElementById("game-score").textContent=this.resultGame.result,this.gameArea.forEach(function(t){var n=document.createElement("div");n.setAttribute("class","game-child-row"),t.forEach(function(){var e=document.createElement("div");e.setAttribute("class","game-child-cell"),n.appendChild(e)}),e.appendChild(n)}),e}},{key:"start",value:function(){var e=this,t=this.createHtmlMarkUpGamePlace();P.hasChildNodes()?P.replaceChild(t,P.children[0]):P.appendChild(t),this.gameStep(),y=window.setInterval(function(){e.gameStep()},this.speed)}},{key:"addSnakeToArea",value:function(e,t,n){var r=e.map(function(e){return e.map(function(e){return e})});return t.forEach(function(e){r[e.y][e.x]=n}),r}},{key:"compareStateArea",value:function(e,t){var n=[];return e.forEach(function(e,r){return e.forEach(function(e,i){e!==t[r][i]&&n.push({y:r,x:i,change:t[r][i]})})}),n}},{key:"updateArea",value:function(e,t){var n=this.compareStateArea(e,t,this.snakeName);return n.forEach(function(e){t[e.y][e.x]=e.change}),n}},{key:"updateHTML",value:function(e,t){var n=this;e.forEach(function(e){e.change===n.zeroFieldName&&t[e.y].children[e.x].setAttribute("class","game-child-cell"),e.change===n.snakeName&&t[e.y].children[e.x].setAttribute("class","game-child-cell snake-cell"),e.change===n.foodName&&t[e.y].children[e.x].setAttribute("class","game-child-cell food-cell")})}},{key:"addFoodToArea",value:function(e,t){var n=e.map(function(e){return e.map(function(e){return e})});return n[t.y][t.x]=this.foodName,n}},{key:"gameStep",value:function(){var t=this,n=[].concat(i(P.children[0].children));this.direction=e.getDirection(this.direction,this.userPressKey);var r=this.addFoodToArea(this.newGameAreaState(),this.foodPosition),a=this.snake.makeNextStep(this.gameArea,this.direction,this.snakeName,this.foodPosition);a?r=this.addSnakeToArea(r,a,this.snakeName):this.end(),r.some(function(e){return e.some(function(e){return e===t.foodName})})||(this.foodPosition=c.default.generateFoodPosition(r),r=this.addFoodToArea(r,this.foodPosition),this.resultGame.result++,document.getElementById("game-score").textContent=this.resultGame.result);var o=this.updateArea(this.gameArea,r);this.updateHTML(o,n),this.gameArea=r.map(function(e){return e.map(function(e){return e})}),this.userPressKey=void 0}},{key:"pause",value:function(){var e=this;this.gamePaused?(this.gamePaused=!1,y=window.setInterval(function(){e.gameStep()},this.speed)):(this.gamePaused=!0,window.clearInterval(y))}},{key:"end",value:function(){(!d.default.getResult()||this.resultGame.result>=d.default.getResult())&&d.default.saveResult(this.resultGame.result),document.getElementById("current-score").textContent=this.resultGame.result.toString(),document.getElementById("record-score").textContent=d.default.getResult()||0,window.clearInterval(y),s()}}],[{key:"getDirection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return"left"===e&&"right"===t?"left":"right"===e&&"left"===t?"right":"up"===e&&"down"===t?"up":"down"===e&&"up"===t?"down":t}}]),e}(),g=[].concat(i(document.getElementsByClassName("start-button"))),v=document.getElementById("game"),P=document.getElementById("game-area");g.map(function(e){return e.addEventListener("click",function(){return o()})});var k=new p;document.getElementById("pause-button").addEventListener("click",function(){return k.pause()}),window.addEventListener("keydown",function(e){if(!e.preventDefaulted)switch(e.code){case"Enter":case"Space":o();break;case"KeyS":case"ArrowDown":k.userPressKey="down";break;case"KeyW":case"ArrowUp":k.userPressKey="up";break;case"KeyA":case"ArrowLeft":k.userPressKey="left";break;case"KeyD":case"ArrowRight":k.userPressKey="right"}})}});